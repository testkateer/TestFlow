/* ============================================
   MODERN THEME SYSTEM
   ============================================ */

/* CSS Environment Variables Support */
:root {
  /* Safe area insets for mobile */
  --safe-area-inset-top: env(safe-area-inset-top, 0);
  --safe-area-inset-right: env(safe-area-inset-right, 0);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0);
  --safe-area-inset-left: env(safe-area-inset-left, 0);
  
  /* Color scheme declaration */
  color-scheme: light dark;
  
  /* Advanced color system with P3 color space support */
  --color-primary-p3: color(display-p3 0.231 0.510 0.965);
  --color-success-p3: color(display-p3 0.063 0.725 0.506);
  --color-error-p3: color(display-p3 0.937 0.267 0.267);
  
  /* Fallback for older browsers */
  --color-primary-fallback: #3b82f6;
  --color-success-fallback: #10b981;
  --color-error-fallback: #ef4444;
  
  /* Use P3 if supported, fallback otherwise */
  --color-primary-enhanced: var(--color-primary-p3, var(--color-primary-fallback));
  --color-success-enhanced: var(--color-success-p3, var(--color-success-fallback));
  --color-error-enhanced: var(--color-error-p3, var(--color-error-fallback));
  
  /* Dynamic viewport units */
  --vh: 1vh;
  --vw: 1vw;
  --vmin: 1vmin;
  --vmax: 1vmax;
  
  /* Container query support */
  --container-width: 100cqw;
  --container-height: 100cqh;
}

/* Modern color-scheme support */
:root {
  color-scheme: light;
}

[data-theme="dark"] {
  color-scheme: dark;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --color-primary: #0000ff;
    --color-success: #008000;
    --color-error: #ff0000;
    --border-primary: #000000;
    --text-primary: #000000;
    --bg-primary: #ffffff;
  }
  
  [data-theme="dark"] {
    --color-primary: #00ffff;
    --color-success: #00ff00;
    --color-error: #ff0000;
    --border-primary: #ffffff;
    --text-primary: #ffffff;
    --bg-primary: #000000;
  }
}

/* Force colors mode (Windows High Contrast) */
@media (forced-colors: active) {
  :root {
    --color-primary: ButtonText;
    --color-success: ButtonText;
    --color-error: ButtonText;
    --bg-primary: ButtonFace;
    --text-primary: ButtonText;
    --border-primary: ButtonText;
  }
}

/* Safe area padding utilities */
.safe-area-top { padding-top: var(--safe-area-inset-top); }
.safe-area-right { padding-right: var(--safe-area-inset-right); }
.safe-area-bottom { padding-bottom: var(--safe-area-inset-bottom); }
.safe-area-left { padding-left: var(--safe-area-inset-left); }
.safe-area-all {
  padding-top: var(--safe-area-inset-top);
  padding-right: var(--safe-area-inset-right);
  padding-bottom: var(--safe-area-inset-bottom);
  padding-left: var(--safe-area-inset-left);
}

/* Dynamic viewport utilities */
.h-screen-safe { height: calc(100vh - var(--safe-area-inset-top) - var(--safe-area-inset-bottom)); }
.min-h-screen-safe { min-height: calc(100vh - var(--safe-area-inset-top) - var(--safe-area-inset-bottom)); }

/* Modern focus management */
.focus-visible:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.focus-visible:focus:not(:focus-visible) {
  outline: none;
}

/* Print styles optimization */
@media print {
  :root {
    --bg-primary: white;
    --bg-secondary: white;
    --text-primary: black;
    --text-secondary: black;
    --border-primary: black;
  }
  
  .no-print { display: none !important; }
  .print-only { display: block !important; }
  
  .card {
    box-shadow: none;
    border: 1px solid #000;
  }
  
  .btn {
    border: 1px solid #000;
    background: transparent;
    color: #000;
  }
}

/* Color gamut support */
@media (color-gamut: p3) {
  :root {
    --color-primary: var(--color-primary-p3);
    --color-success: var(--color-success-p3);
    --color-error: var(--color-error-p3);
  }
}

/* Hover capability detection */
@media (hover: hover) {
  .hover\:scale {
    transition: transform var(--transition-normal);
  }
  
  .hover\:scale:hover {
    transform: scale(1.05);
  }
}

@media (hover: none) {
  .hover\:scale:active {
    transform: scale(0.95);
  }
}

/* Pointer capability detection */
@media (pointer: coarse) {
  .btn {
    min-height: 44px;
    min-width: 44px;
  }
  
  .clickable {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Modern scroll behavior */
@supports (scroll-behavior: smooth) {
  html {
    scroll-behavior: smooth;
  }
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
} 